#Lager Funktionsweise

Das Lager dient für die Verwaltung von Artikeln, die von der Foodcoop auf Vorrat beschafft und im Lagerraum der Foodcoop gelagert werden. Für das Lager können so wie die Bestellungen bei den Lieferantinnen eigene Lagerbestellungen angelegt werden, wo Bestellgruppen der Foodcoop Artikel bestellen können.  Die Foodsoft verwaltet den Lagerstand dieser Artikel und reduziert ihn bei Bestellungen entsprechend. Wenn der Lagerstand eines Artikels erschöpft ist, ist auch keine Bestellung dieses Artikels mehr möglich. Lagerartikel können entweder einfach direkt beim Hersteller ohne die Foodsoft bestellt werden, oder im Zuge einer normalen Foodsoft-Bestellung zusätzlich zu den Bestellungen der Mitglieder (auch diese Bestellung heißt in der Foodsoft „Lagerbestellung“).

> **Lagerbestellung** steht in der Foodsoft für 2 verschiedene Arten von Bestellungen:
> - um das Lager mit Artikel der Lieferantin aufzufüllen, und 
> - damit Mitglieder Artikel aus dem Lager bestellen und entnehmen können.
{.is-info}


Das Lager hat eine eigene Artikelliste, wo die Artikel von Lieferantinnen eingebracht werden können, oder auch unabhängig von Artikeln der Lieferantinnen Lagerartikel angelegt werden können. 

Auch für Lagerartikel braucht es immer eine Lieferantin in der Foodsoft. Eine Lieferantin kann jedoch sowohl Lagerartikel als auch Artikel für Direktbestellungen der Mitglieder haben. Beispeilsweise können bei einer Bestellung zusätzliche Artikel, die nötig sind, um volle Gebinde zu erreichen, ins Lager übernommen werden: 
> Beispiel: Gebindegröße 6 Stück, 10 Stück von Mitgliedern bestellt, 2 x 6 = 12 müssen bei der Lieferantin bestellt werden,  10 davon gehen direkt an die Mitglieder, 2 ins Lager.

Über die Funktion „Lieferung“ können 
- Lagerartikel neu angelegt oder aus der Artikellliste der Lieferantin übernommen werden (nur einmalig oder bei Änderungen erforderlich), und
- Lagerartikel in den Lagerbestand der Foodsoft aufgenommen werden, indem angegeben wird, wieviel Stück von welchem Artikel ins Lager eingebracht werden.


Über Lagerbestellungen können Lagerartikel von den Mitgliedern entnommen werden. Der Lagerstand verringert sich dann entsprechend, solange die Lagerbestellung offen ist, zunächst nur der „verfügbare Lagerstand,“ wenn die Lagerbestellung abgerechnet ist, auch der eigentliche Lagerbestand. 

> Wichtig ist, dass Mitglieder nur Lagerartikel aus dem Foodcoop Lager entnehmen sollten, die sie auch vorher bestellt haben, weil es sonst vorkommen kann, dass andere Mitglieder, die Artikel schon bestellt haben, und sie aber später abholen wollen, keine Artikel mehr vorfinden.
{.is-warning}


## Ablauf

Der Ablauf für Lagerartikel ist wie folgt:

1. Lieferantin anlegen, falls noch nicht existiert (einmalig), siehe [Lieferantinnen](Lieferantinnen)
2. Artikel anlegen (einmalig, bzw. wenn neu), siehe [Lieferantinnen](Lieferantinnen) 
3. Lager-Lieferungen für Lieferantinnen anlegen, um Artikel ins Lager einzubringen. Das ist normal dann der Fall, wenn Lieferungen von Lieferantinnen im Lagerraum angekommen sind, oder am Anfang, wenn das Lager in der Foodsoft eingerichtet wird, und schon Artikel im Lagerraum vorhanden sind.
   1.  Dazu einmalig entweder Artikel der Lieferantin als Lagerartikel kopieren 
   2.  oder neu erstellen.
   3.  Für die Lieferung eine Rechnung an der Foodsoft auf Basis der Rechnung des Lieferanten anlegen
4. Lagerbestellung anlegen. Sobald ein Artikel bestellt ist, verringert sich die Anzahl der verfügbaren Artikel.
5. Lagerbestellung anpassen (falls bestellte Artikel nicht verfügbar waren) und abrechnen
6. zurück zu Punkt 3. oder 4.

# Lager Artikelliste

Menü **Artikel > Lager**

Artikel sind nach Lieferant gruppiert dargestellt. Für schnelleres Auffinden von bestimmten Artikeln bei umfangreicheren Lagerartikellisten die Suchfunktion des Webbrowsers (Strg+F) verwenden.

> Ansichtsoptionen: nicht verfügbare Artikel anzeigen/verstecken: nicht verfügbare Artikel werden standardmäßig nicht angezeigt.
{.is-warning}


## Bedeutung der Spalten

- **Artikel**: Bezeichnung des Artikels, hinterlegt mit einem Link auf die Detailseite zum Artikel  
- **im Lager**: entspricht der Anzahl der Artikel, die sich im Lager befinden sollten, wenn laufende Lagerbestellungen noch nicht abgeholt wurden, und bereits beendete Lagerbestellungen abgeholt und abgerechnet wurden.
- **Davon bestellt**: Artikel, die bestellt wurden, und von denen die Bestellung noch nicht abgerechnet wurde. 
- **Verfügbar**: “Anzahl im Lager” minus “davon bestellt”. Sollte der Anzahl der Artikel entsprechen, die 
  - zum aktuellen Zeitpunkt noch bestellt werden kann
  - aktuell im Lager vorhanden ist, wenn alle Lagerbestellungenbeendet wurden und alle bestellten Artikel auch abgeholt wurden.

Verbesserungsvorschlag: …


## Detailansicht Lagerartikel

Unter **Artikel > Lager** auf die Bezeichnung eines Artikels klicken, um zur Detailansicht zu gelangen.

### Artikelinfos

- Lieferantin
- Name
- Einheit
- Nettopreis
- MwSt
- Pfand
- Endpreis
- Kategorie
- Notiz
- im Lager
- Verfügbarer Bestand


### Artikel Bearbeiten

Nur Name, Einheit, Kategorie und Notiz können bearbeitet werden. Preis, Mwst und Pfand können nicht bearbeitet werden, dazu muss eine Kopie des Artikels angelegt werden. Der Lagerstand eines Artikels kann ebenfalls nicht bearbeitet werden, aber durch eine Inventur angepassst werden. 


### Verlauf des Lagerbestands

Der Verlauf des Lagerstands wird angezeigt, wobei berücksichtigt werden:
- Lagerbestellungen: nur bereits abgerechntete  
- Lieferungen 
- Inventuren


## Lagerartikel neu anlegen

Lieferantin und Artikel anlegen: siehe [Lieferantinnen](Lieferantinnen). 

> Lagerartikel können erst neu angelegt oder von der Lieferantin in die Lagerartikelliste übernommen werden, wenn eine konkrete Lieferung erfolgt, siehe unten.
{.is-info}

# Lagerartikel bei Lieferantin bestellen

## Bestellen über die Foodsoft

Wenn eine Bestellung für die Mitglieder bei einer Lieferantin angelegt ist, können auch Artikel fürs Lager bei dieser Lieferantin mitbestellt werden: 

Bestellen \> Bestellverwaltung \> Bestellung anzeigen \> Lagerbestellung. 

Es kann auch eine Bestellung nur für eine Lagerbestellung angelegt werden, um eine Bestellliste für die Lieferantin zu erstellen, und dann die Bestellung gleich wieder geschlossen werden, wenn nicht erwünscht ist, dass Mitglieder bei der Lieferantin direkt bestellen. Eine Funktion, die es ermöglicht, bestimmte Artikel nur für die Lagerbestellung freizuschalten, aber nicht für Mitglieder (z.B. Öl-Lieferantin: Kanister Großgebinde 5L nur für Lagerbestellung, 1L-Flaschen für Mitglieder) gibt es derzeit noch nicht.

Wie bei den Bestellungen beschrieben, kann nach Abschluss der Bestellung eine Bestellliste z.B. im PDF -Format erstellt und die Lieferantin geschickt werden. 

> Leider gibt es in der Foodsoft noch keine Verknüpfung der Funktionen Lagerbestellung und Lieferung, sodass in jedem Fall die Anzahl der gelieferten Artikel in der Funktion „Lieferung“ (siehe nächster Abschnitt) neu eingegeben werden muss, unabhängig davon, ob dies bereits bei einer Lagerbestellung vorher erfolgt ist.
{.is-danger}



## Sonstige Bestellvarianten für Lagerartikel

Ansonsten kann eine Bestellung fürs Lager auch direkt bei der Lieferantin z.B. per Telefon, Email oder über einen Webshop erfolgen, ohne die Foodsoft zu verwenden. 

> Wichitg ist auch in diesem Fall der nächste Schritt, nämlich über eine Lieferung die Artikel ins Lager einzubringen.
{.is-warning}

# Lieferung: Artikel ins Lager einbringen

**Artikel \> Lager \> neue Lieferung.. \> Lieferantin**

1. Einmalig bei der ersten Lieferung,  falls es neue Artikel gibt, oder sich der Preis geändert hat: 
   -  Lagerartikel aus Artikel der Lieferantin anlegen (empfohlen, Vorteil: Artikel der Lieferantin kann verändert und neu ins Lager übernommen werden, während Lagerartikel nur gelöscht und neu angelegt werden kann); alternativ:
   -  Lagerartikel neu anlegen (ohne vorher Artikel bei Lieferantin angelegt zu haben; Nachteil: Lagerartikel kann bei Änderungen nur gelöscht und neu angelegt werden)
1. Lagerartikel auswählen und jeweils gelieferte Stückzahl eingeben
1. Im Notizfeld deinen Namen eingeben
1. [Rechnung](Finanzen/Rechnungen) anlegen

Details siehe **Tutorial - Lagerartikel anlegen und einbringen.pdf**

> Empfehlung: trage in das Notizfeld der Lieferung deinen Namen ein, damit später nachvollziehbar ist, wer sie angelegt hat. Die Foodsoft zeigt nicht an, wer Lieferungen erstellt hat.
{.is-info}

> Preise von Lagerartikeln können nicht geändert werden. Wenn eine neue Lieferung mit einem anderen Preis ankommt, muss der Lagerbestand der alten Artikel Null sein, damit dieser Lagerrtikel gelöscht werden und mit einem anderen Preis neu angelegt werden kann. Ansonsten muss für die neuen Artikel ein weiterer Lagerartikel mit dem neuen Preis unter einer anderen Artikelbezeichnung angelegt wrrden, z.B. "Rosinen" (Altbestand) und "Rosinen 2021-05" für die neuen). 
{.is-warning}

# Lagerbestellung für Mitglieder anlegen

Die Lagerbestellung ermöglich es den Foocoop Mitgliedern, Artikel aus dem Lager zu bestellen. Diese Bestellung scheint dann für Mitglieder bei den anderen Bestellungen mit dem Lieferantinnenname **Lager** auf. 

**Artikel \> Lager \> Lagerbestellung online stellen** - dazu ist die Berechtigung **Artikel** oder **Lieferantinnnen** erforderlich. Die Bestellung scheint dann unter Bestellungen > Bestellverwaltung auf und kann dort noch bearbeitet werden.

Wenn eine Lagerbestellung anlegt wird, werden automatisch nur jene Artikel übernommen, wo der zu diesem Zeitpunkt in der Foodsoft aktuelle Lagerstand größer als Null ist. Wenn der Lagerstand ursprünglich Null ist, und sich der Lagerstand später wieder erhöht, z.B. durch eine Inventur oder  eine Lieferung, wird dieser Artikel von der Foodsoft nicht automatisch in laufende Bestellungen aufgenommen, sondern erst in jene Bestellungen, die nach der Lagerstandsänderung angelegt werden. In so einem Fall könnt ihr die offenen Lager-Bestellungen bearbeiten und die entsprechenden Artikel hinzufügen, damit sie gleich verfügbar sind. 


Tipps: 

- Wöchentlich eine Lagerbestellung mit dem üblichen Abholtag der anderen Bestellungen anlegen (z.B. Lagerbestellung Sonntag bis Mittwoch, Abholung Freitag). Diese Lagerbestellung scheint dann in den Bestelllisten unter Bestellen \> Abholtage auf.
- Wöchentlich eine Lagerbestellung für spontan bei der Abholung mitzunehmende Artikel anlegen, zeitversetzt zur ersten Lagerbestellung (Beispiel: Mittwoch bis Dienstag). Hier können Lagerartikel bestellt werden, bevor sie spontan mitgenommen werden. Allerdings kommt es trotzdem immer wieder vor, dass Mitglieder Artikel mitnehmen, ohne sie vorher zu bestellen (z.B. weil sie dazu gerade keine Zeit haben, oder auch weil sie die Artikel in der Foodsoft Lagerbestellung gerade nicht finden), dann aber zuhause feststellen, dass der Artikel gar nicht bestellbar ist, meist deshalb, weil ihn bereits wer anderer bestellt, aber noch nicht abgeholt hatte.

# Inventur anlegen

Erfahrungsgemäß stimmt dnach einger Zeit er tatsächliche Lagerstand oft nicht mit dem in der Foodsoft zusammen, weil Artikel bestellt, aber nicht abgeholt werden, oder umgekehrt. Daher ist es von Zeit zu Zeit notwendig, eine Inventur durchzuführen, um den Lagerbestand in der Foodsoft dem tatsächlichen anzupassen, siehe unten. Eine Inventur ist aber nur sinnvoll, wenn gerade keine laufende Lagerbestellung offen ist, und alle bisher bestellten Lagerartikel auch schon abgeholt wurden. 

Empfehlungen daher: 
- Bisherige Lagerbestellungen vorher beenden (und abrechnen?): Während der Inventur darf keine Lagerbestellung offen sein. 
- Mitglieder informieren, dass 
  - vor der Inventur alle bis dahin bestellten Lagerartikel abgeholt werden müssen (oder sonst Bescheid geben: “habe Artikel X bestellt, aber komme erst nach der Inventur dazu, ihn abzuholen”), sodass nicht abgeholte Artikel bei der Erfassung des Lagerbestands berücksichtigt werden können ; 
  - während der Inventur keine Lagerbstellung (und wie sonst auch keine Abholung ohne Bestellung) möglich ist.
  - Neue Lagerbestellung erst nach Abschluss der Inventur starten

Lagerstand Inventurliste = “Verfügbar” aus Lagerliste

> Inventurbilanz als Geldbetrag anzeigen:
> [*https://github.com/foodcoops/foodsoft/issues/856*](https://github.com/foodcoops/foodsoft/issues/856)
{.is-danger}

